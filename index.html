<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Get User Location - Tableau Extension</title>
 <script type="text/javascript" 
  src="https://public.tableau.com/javascripts/api/tableau-2.min.js">
</script>
</head>
<body>
  <h2>User Location</h2>
  <p id="location">Initializing...</p>
<script>
  const output = document.getElementById('location');
  const log = (...args) => console.log('[DEBUG]', ...args);

  // Try to dynamically load the Tableau JS API
  const script = document.createElement("script");
  script.src = "https://tableau.github.io/extensions-api/lib/tableau.extensions.1.latest.js";
  script.onload = () => {
    if (window.tableau) {
      tableau.extensions.initializeAsync().then(() => {
        log("✅ Inside Tableau");
        output.textContent = "Extension loaded inside Tableau.";
      });
    } else {
      log("⚠️ Tableau object not found after script load.");
      output.textContent = "Failed to initialize: no Tableau object.";
    }
  };
  script.onerror = () => {
    output.textContent = "Failed to load Tableau Extensions API.";
    log("❌ Could not load Extensions API");
  };
  document.head.appendChild(script);
</script>

</body>
</html>


