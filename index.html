<!DOCTYPE html>
<html>
<head>
    <title>Get User Location - Tableau Extension</title>
    <script src="./lib/tableau.extensions.1.latest.js"></script>
</head>
<body>
    <h2>User Location</h2>
    <p id="location">Locating...</p>

    <script>
        tableau.extensions.initializeAsync().then(function () {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function (position) {
                        const lat = position.coords.latitude.toFixed(6);
                        const lng = position.coords.longitude.toFixed(6);
                        document.getElementById('location').textContent = `Latitude: ${lat}, Longitude: ${lng}`;
                    },
                    function (error) {
                        document.getElementById('location').textContent = `Error getting location: ${error.message}`;
                    }
                );
            } else {
                document.getElementById('location').textContent = "Geolocation is not supported by this browser.";
            }
        });
    </script>
</body>
</html>

